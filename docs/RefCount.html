<HTML>
<HEAD>
<TITLE>class RefCount</TITLE>
<META NAME="Generator" CONTENT="KDOC ">
</HEAD>
<BODY bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink= "#ffffff">
<TABLE WIDTH="100%" BORDER="0">
<TR>
<TD>
	<TABLE BORDER="0">
		<TR><TD valign="top" align="left" cellspacing="10">
		<h1>class RefCount</h1>
		</TD>
		<TD valign="top" align="right" colspan="1">
	a reference count pointer object. <small><A HREF="#longdesc">More...</A></small></TD></TR>
	</TABLE>
	<HR>
	<TABLE BORDER="0">
		<TR><TH>Definition</TH><TD><code>#include &lt;<A HREF="RefCount_h.html">RefCount.h</A>&gt;</code></TD></TR>
<TR><TH>Template form</TH><TD>RefCount&lt;template class T&gt; </code></TD></TR>
<TR><TH><A HREF="full-list-RefCount.html">List of all Methods</A></TH></TR>
	</TABLE>
	</TD>
<TD align="right"><TABLE BORDER="0"><TR><TD><small><A HREF="index-long.html">Annotated List</small></TD></TR>
<TR><TD><small><A HREF="header-list.html">Files</small></TD></TR>
<TR><TD><small><A HREF="all-globals.html">Globals</small></TD></TR>
<TR><TD><small><A HREF="hier.html">Hierarchy</small></TD></TR>
<TR><TD><small><A HREF="index.html">Index</small></TD></TR>
</TABLE></TD></TR></TABLE>
<h4>Public Types</h4><ul><LI>typedef map&lt;T*,unsigned int&gt;  References
</LI>
</ul><h4>Public Methods</h4><ul><LI>&nbsp;<b>RefCount</b> ( T * _ptr = 0 ) 		: _ptr ( _ptr ) 
</LI>
<LI>&nbsp;<b>RefCount</b> ( const <A HREF="RefCount.html">RefCount</A> &amp; other ) 		: _ptr ( 0 ) 
</LI>
<LI>virtual  ~&nbsp;<b>RefCount</b> () 
</LI>
<LI>const <A HREF="RefCount.html">RefCount</A> &amp; &nbsp;<b><A HREF="#ref5">operator =</A></b> ( <A HREF="RefCount.html">RefCount</A> &amp; other ) 
</LI>
<LI>const <A HREF="RefCount.html">RefCount</A> &amp; &nbsp;<b>operator =</b> ( const <A HREF="RefCount.html">RefCount</A> &amp; other ) 
</LI>
<LI>bool &nbsp;<b>operator &lt;</b> ( const <A HREF="RefCount.html">RefCount</A> &amp; other )  const
</LI>
<LI>bool &nbsp;<b>operator ==</b> ( const <A HREF="RefCount.html">RefCount</A> &amp; other )  const
</LI>
<LI>bool &nbsp;<b>operator ==</b> ( const T * other )  const
</LI>
<LI>T * &nbsp;<b><A HREF="#ref10">operator -&gt;</A></b> ()  const
</LI>
<LI>T &amp; &nbsp;<b>operator *</b> () 
</LI>
<LI>const T &amp; &nbsp;<b>operator *</b> ()  const
</LI>
<LI>&nbsp;<b><A HREF="#ref13">operator T *</A></b> ()  const
</LI>
<LI>T * &nbsp;<b>data</b> ()  const
</LI>
<LI>References &amp; &nbsp;<b>references</b> () 
</LI>
<LI>References &amp; &nbsp;<b>references</b> ()  const
</LI>
<LI>void &nbsp;<b><A HREF="#ref17">write</A></b> ( ostream &amp; os )  const
</LI>
</ul><h4>Protected Methods</h4><ul><LI>void &nbsp;<b><A HREF="#ref18">decrement</A></b> () 
</LI>
<LI>void &nbsp;<b><A HREF="#ref19">increment</A></b> () 
</LI>
</ul><h4>Private Members</h4><ul><LI>T *<b>_ptr</b></LI>
<LI>Sync <b><A HREF="#ref21">_sync</A></b></LI>
<LI>static References *<b><A HREF="#ref22">_references</A></b></LI>
<LI>static unsigned long <b><A HREF="#ref23">refcount</A></b></LI>
</ul><HR><A NAME="longdesc"><H2>Detailed Description</H2><p>
	a reference count pointer object. More overhead than
	a SmartPointer, but safer in certain situations. Like
	multithreading, in fact it uses thread synchronisation
	objects Lock and Sync.
&lt;p&gt;
	Acts like SmartPointer in many ways in that an instance of RefCount
	is almost completely interchangeable for the pointer it's reference
	counting. See SmartPointer documentation for more details.
</p><A NAME="operator%2520="></A><A NAME="ref5"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>const <A HREF="RefCount.html">RefCount</A> &amp; &nbsp;<underline>operator =</underline> ( <A HREF="RefCount.html">RefCount</A> &amp; other )
</strong></td></tr></table><p></p><p>
		to avoid problems with the combination of a non-explicit
		constructor and a conversion operator. See SmartPointer
		for details.
	</p><A NAME="operator%2520-%253E"></A><A NAME="ref10"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>T * &nbsp;<underline>operator -&gt;</underline> ()
</strong></td></tr></table><p> <small>[const]</small></p><p>
		member access operator. Obviously
		won't work with T as a non-class object
	</p><A NAME="operator%2520T%2520*"></A><A NAME="ref13"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>&nbsp;<underline>operator T *</underline> ()
</strong></td></tr></table><p> <small>[const]</small></p><p>
		conversion operator. Use an instance
		of this object wherever a T * is expected
	</p><A NAME="write"></A><A NAME="ref17"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>void &nbsp;<underline>write</underline> ( ostream &amp; os )
</strong></td></tr></table><p> <small>[const]</small></p><p>
		mostly for debugging the class. Prints the addresse
		being pointed to and the refcounts for the address.
	</p><A NAME="decrement"></A><A NAME="ref18"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>void &nbsp;<underline>decrement</underline> ()
</strong></td></tr></table><p> <small>[protected]</small></p><p>
		decrement the reference count for the _ptr held by this
		instance.
	</p><A NAME="increment"></A><A NAME="ref19"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>void &nbsp;<underline>increment</underline> ()
</strong></td></tr></table><p> <small>[protected]</small></p><p>
		increment the reference count for the _ptr held by this
		instance.
	</p><A NAME="_sync"></A><A NAME="ref21"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>Sync  <underline>_sync</underline>
</strong></td></tr></table><p> <small>[private]</small></p><p>
		synchronize accesses to class members for multi-threaded situations,
		since that's the most likely place a RefCount object will be used.
	</p><A NAME="_references"></A><A NAME="ref22"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>static References * <underline>_references</underline>
</strong></td></tr></table><p> <small>[private]</small></p><p>
		the list of references, which obviously must exist beyond the
		lifetime of any particular RefCount instance. It would be neater
		not to use a pointer here, but then we run into trouble with
		the order in which static objects are constructed.
	</p><A NAME="refcount"></A><A NAME="ref23"></A><table width="100%"><tr bgcolor="#eeeeee"><td><strong>static unsigned long  <underline>refcount</underline>
</strong></td></tr></table><p> <small>[private]</small></p><p>
		the reference count for _references. Provided that there is
		at least one instance of RefCount, _references will not be deleted
	</p><HR>
	<table>
	<tr><td><small>Generated by: panic@GROOVIOUS on Wed Mar 22 18:23:58 2000, using kdoc $.</small></td></tr>
	</table>
</BODY>
</HTML>
